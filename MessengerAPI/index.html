<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://mathi0909.github.io/testdeployment4/MessengerAPI/">
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>MessengerAPI - Documentation</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Messenger API", url: "#_top", children: [
              {title: "Table of Contents", url: "#table-of-contents" },
          ]},
          {title: "Introduction", url: "#introduction", children: [
              {title: "Scope", url: "#scope" },
              {title: "Case Sensitivity", url: "#case-sensitivity" },
              {title: "Acronyms, Abbreviations and Terms", url: "#acronyms-abbreviations-and-terms" },
              {title: "References", url: "#references" },
          ]},
          {title: "Description", url: "#description", children: [
          ]},
          {title: "Methods", url: "#methods", children: [
              {title: "join method", url: "#join-method" },
              {title: "leave method", url: "#leave-method" },
              {title: "send method", url: "#send-method" },
          ]},
          {title: "Notifications", url: "#notifications", children: [
              {title: "roomupdate event", url: "#roomupdate-event" },
              {title: "userupdate event", url: "#userupdate-event" },
              {title: "message event", url: "#message-event" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    

    <!-- Generated automatically, DO NOT EDIT! -->

<p><a name="head.Messenger_API"></a></p>
<h1 id="messenger-api">Messenger API</h1>
<p><strong>Version: 1.0</strong></p>
<p><strong>Status: :black_circle::white_circle::white_circle:</strong></p>
<p>Messenger interface for Thunder framework.</p>
<h3 id="table-of-contents">Table of Contents</h3>
<ul>
<li><a href="#head.Introduction">Introduction</a></li>
<li><a href="#head.Description">Description</a></li>
<li><a href="#head.Methods">Methods</a></li>
<li><a href="#head.Notifications">Notifications</a></li>
</ul>
<p><a name="head.Introduction"></a></p>
<h1 id="introduction">Introduction</h1>
<p><a name="head.Scope"></a></p>
<h2 id="scope">Scope</h2>
<p>This document describes purpose and functionality of the Messenger interface. It includes detailed specification about its methods provided and notifications sent.</p>
<p><a name="head.Case_Sensitivity"></a></p>
<h2 id="case-sensitivity">Case Sensitivity</h2>
<p>All identifiers of the interfaces described in this document are case-sensitive. Thus, unless stated otherwise, all keywords, entities, properties, relations and actions should be treated as such.</p>
<p><a name="head.Acronyms,_Abbreviations_and_Terms"></a></p>
<h2 id="acronyms-abbreviations-and-terms">Acronyms, Abbreviations and Terms</h2>
<p>The table below provides and overview of acronyms used in this document and their definitions.</p>
<table>
<thead>
<tr>
<th align="left">Acronym</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a name="acronym.API">API</a></td>
<td align="left">Application Programming Interface</td>
</tr>
<tr>
<td align="left"><a name="acronym.HTTP">HTTP</a></td>
<td align="left">Hypertext Transfer Protocol</td>
</tr>
<tr>
<td align="left"><a name="acronym.JSON">JSON</a></td>
<td align="left">JavaScript Object Notation; a data interchange format</td>
</tr>
<tr>
<td align="left"><a name="acronym.JSON-RPC">JSON-RPC</a></td>
<td align="left">A remote procedure call protocol encoded in JSON</td>
</tr>
</tbody>
</table>
<p>The table below provides and overview of terms and abbreviations used in this document and their definitions.</p>
<table>
<thead>
<tr>
<th align="left">Term</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a name="term.callsign">callsign</a></td>
<td align="left">The name given to an instance of a plugin. One plugin can be instantiated multiple times, but each instance the instance name, callsign, must be unique.</td>
</tr>
</tbody>
</table>
<p><a name="head.References"></a></p>
<h2 id="references">References</h2>
<table>
<thead>
<tr>
<th align="left">Ref ID</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a name="ref.HTTP"><a href="http://www.w3.org/Protocols">HTTP</a></a></td>
<td align="left">HTTP specification</td>
</tr>
<tr>
<td align="left"><a name="ref.JSON-RPC"><a href="https://www.jsonrpc.org/specification">JSON-RPC</a></a></td>
<td align="left">JSON-RPC 2.0 specification</td>
</tr>
<tr>
<td align="left"><a name="ref.JSON"><a href="http://www.json.org/">JSON</a></a></td>
<td align="left">JSON specification</td>
</tr>
<tr>
<td align="left"><a name="ref.Thunder"><a href="https://github.com/WebPlatformForEmbedded/Thunder/blob/master/doc/WPE%20-%20API%20-%20WPEFramework.docx">Thunder</a></a></td>
<td align="left">Thunder API Reference</td>
</tr>
</tbody>
</table>
<p><a name="head.Description"></a></p>
<h1 id="description">Description</h1>
<p>Messenger JSON-RPC interface.</p>
<p><a name="head.Methods"></a></p>
<h1 id="methods">Methods</h1>
<p>The following methods are provided by the Messenger interface:</p>
<p>Messenger interface methods:</p>
<table>
<thead>
<tr>
<th align="left">Method</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="#method.join">join</a></td>
<td align="left">Joins a messaging room</td>
</tr>
<tr>
<td align="left"><a href="#method.leave">leave</a></td>
<td align="left">Leaves a messaging room</td>
</tr>
<tr>
<td align="left"><a href="#method.send">send</a></td>
<td align="left">Sends a message to a room</td>
</tr>
</tbody>
</table>
<p><a name="method.join"></a></p>
<h2 id="join-method"><em>join <sup>method</sup></em></h2>
<p>Joins a messaging room.</p>
<h3 id="description_1">Description</h3>
<p>Use this method to join a room. If the specified room does not exist, then it will be created.</p>
<p>Also see: <a href="#event.userupdate">userupdate</a></p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">params</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">params.user</td>
<td align="left">string</td>
<td align="left">User name to join the room under (must not be empty)</td>
</tr>
<tr>
<td align="left">params.room</td>
<td align="left">string</td>
<td align="left">Name of the room to join (must not be empty)</td>
</tr>
<tr>
<td align="left">params?.secure</td>
<td align="left">string</td>
<td align="left"><sup><em>(optional)</em></sup> Room security (must be one of the following: <em>insecure</em>, <em>secure</em>)</td>
</tr>
<tr>
<td align="left">params?.acl</td>
<td align="left">array</td>
<td align="left"><sup><em>(optional)</em></sup> Access-control list for secure room</td>
</tr>
<tr>
<td align="left">params?.acl[#]</td>
<td align="left">string</td>
<td align="left"><sup><em>(optional)</em></sup> URL origin with possible wildcards</td>
</tr>
</tbody>
</table>
<h3 id="result">Result</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">result</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">result.roomid</td>
<td align="left">string</td>
<td align="left">Unique ID of the room</td>
</tr>
</tbody>
</table>
<h3 id="errors">Errors</h3>
<table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Message</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">5</td>
<td align="left"><code>ERROR_ILLEGAL_STATE</code></td>
<td align="left">User name is already taken (i.e. the user has already joined the room)</td>
</tr>
<tr>
<td align="left">30</td>
<td align="left"><code>ERROR_BAD_REQUEST</code></td>
<td align="left">User name or room name was invalid</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left"><code>ERROR_PRIVILEGED_REQUEST</code></td>
<td align="left">Room security errors</td>
</tr>
</tbody>
</table>
<h3 id="example">Example</h3>
<h4 id="request">Request</h4>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 42,
    &quot;method&quot;: &quot;Messenger.1.join&quot;,
    &quot;params&quot;: {
        &quot;user&quot;: &quot;Bob&quot;,
        &quot;room&quot;: &quot;Lounge&quot;,
        &quot;secure&quot;: &quot;secure&quot;,
        &quot;acl&quot;: [
            &quot;https://*.github.io&quot;
        ]
    }
}
</code></pre>

<h4 id="response">Response</h4>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 42,
    &quot;result&quot;: {
        &quot;roomid&quot;: &quot;1e217990dd1cd4f66124&quot;
    }
}
</code></pre>

<p><a name="method.leave"></a></p>
<h2 id="leave-method"><em>leave <sup>method</sup></em></h2>
<p>Leaves a messaging room.</p>
<h3 id="description_2">Description</h3>
<p>Use this method to leave a room. The room ID becomes invalid after this call. If there are no more users, the room will be destroyed and related resources freed.</p>
<p>Also see: <a href="#event.userupdate">userupdate</a></p>
<h3 id="parameters_1">Parameters</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">params</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">params.roomid</td>
<td align="left">string</td>
<td align="left">ID of the room to leave</td>
</tr>
</tbody>
</table>
<h3 id="result_1">Result</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">result</td>
<td align="left">null</td>
<td align="left">Always null</td>
</tr>
</tbody>
</table>
<h3 id="errors_1">Errors</h3>
<table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Message</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">22</td>
<td align="left"><code>ERROR_UNKNOWN_KEY</code></td>
<td align="left">The given room ID was invalid</td>
</tr>
</tbody>
</table>
<h3 id="example_1">Example</h3>
<h4 id="request_1">Request</h4>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 42,
    &quot;method&quot;: &quot;Messenger.1.leave&quot;,
    &quot;params&quot;: {
        &quot;roomid&quot;: &quot;1e217990dd1cd4f66124&quot;
    }
}
</code></pre>

<h4 id="response_1">Response</h4>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 42,
    &quot;result&quot;: null
}
</code></pre>

<p><a name="method.send"></a></p>
<h2 id="send-method"><em>send <sup>method</sup></em></h2>
<p>Sends a message to a room.</p>
<h3 id="description_3">Description</h3>
<p>Use this method to send a message to a room.</p>
<p>Also see: <a href="#event.message">message</a></p>
<h3 id="parameters_2">Parameters</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">params</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">params.roomid</td>
<td align="left">string</td>
<td align="left">ID of the room to send the message to</td>
</tr>
<tr>
<td align="left">params.message</td>
<td align="left">string</td>
<td align="left">The message content to send</td>
</tr>
</tbody>
</table>
<h3 id="result_2">Result</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">result</td>
<td align="left">null</td>
<td align="left">Always null</td>
</tr>
</tbody>
</table>
<h3 id="errors_2">Errors</h3>
<table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Message</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">22</td>
<td align="left"><code>ERROR_UNKNOWN_KEY</code></td>
<td align="left">The given room ID was invalid</td>
</tr>
</tbody>
</table>
<h3 id="example_2">Example</h3>
<h4 id="request_2">Request</h4>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 42,
    &quot;method&quot;: &quot;Messenger.1.send&quot;,
    &quot;params&quot;: {
        &quot;roomid&quot;: &quot;1e217990dd1cd4f66124&quot;,
        &quot;message&quot;: &quot;Hello!&quot;
    }
}
</code></pre>

<h4 id="response_2">Response</h4>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 42,
    &quot;result&quot;: null
}
</code></pre>

<p><a name="head.Notifications"></a></p>
<h1 id="notifications">Notifications</h1>
<p>Notifications are autonomous events, triggered by the internals of the implementation, and broadcasted via JSON-RPC to all registered observers. Refer to [<a href="#ref.Thunder">Thunder</a>] for information on how to register for a notification.</p>
<p>The following events are provided by the Messenger interface:</p>
<p>Messenger interface events:</p>
<table>
<thead>
<tr>
<th align="left">Event</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="#event.roomupdate">roomupdate</a></td>
<td align="left">Notifies about room status updates</td>
</tr>
<tr>
<td align="left"><a href="#event.userupdate">userupdate</a></td>
<td align="left">Notifies about user status updates</td>
</tr>
<tr>
<td align="left"><a href="#event.message">message</a></td>
<td align="left">Notifies about new messages in a room</td>
</tr>
</tbody>
</table>
<p><a name="event.roomupdate"></a></p>
<h2 id="roomupdate-event"><em>roomupdate <sup>event</sup></em></h2>
<p>Notifies about room status updates.</p>
<h3 id="description_4">Description</h3>
<p>Register to this event to be notified about room status updates. Immediately after registering to this notification the listener will sequentially receive updates of all rooms that have been created so far.</p>
<h3 id="parameters_3">Parameters</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">params</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">params.room</td>
<td align="left">string</td>
<td align="left">Name of the room this notification relates to</td>
</tr>
<tr>
<td align="left">params?.secure</td>
<td align="left">string</td>
<td align="left"><sup><em>(optional)</em></sup> Room security (must be one of the following: <em>insecure</em>, <em>secure</em>)</td>
</tr>
<tr>
<td align="left">params.action</td>
<td align="left">string</td>
<td align="left">Specifies the room status change, e.g. created or destroyed (must be one of the following: <em>created</em>, <em>destroyed</em>)</td>
</tr>
</tbody>
</table>
<h3 id="example_3">Example</h3>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;method&quot;: &quot;client.events.1.roomupdate&quot;,
    &quot;params&quot;: {
        &quot;room&quot;: &quot;Lounge&quot;,
        &quot;secure&quot;: &quot;secure&quot;,
        &quot;action&quot;: &quot;created&quot;
    }
}
</code></pre>

<p><a name="event.userupdate"></a></p>
<h2 id="userupdate-event"><em>userupdate <sup>event</sup></em></h2>
<p>Notifies about user status updates.</p>
<h3 id="description_5">Description</h3>
<p>Register to this event to be notified about room status updates. Immediately after registering to this notification the listener will sequentially receive updates of all users that have joined the room so far.</p>
<h3 id="parameters_4">Parameters</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">params</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">params.user</td>
<td align="left">string</td>
<td align="left">Name of the user that has this notification relates to</td>
</tr>
<tr>
<td align="left">params.action</td>
<td align="left">string</td>
<td align="left">Specifies the user status change, e.g. join or leave a room (must be one of the following: <em>joined</em>, <em>left</em>)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The <em>room ID</em> argument shall be passed within the designator, e.g. <em>1e217990dd1cd4f66124.client.events.1</em>.</p>
</blockquote>
<h3 id="example_4">Example</h3>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;method&quot;: &quot;1e217990dd1cd4f66124.client.events.1.userupdate&quot;,
    &quot;params&quot;: {
        &quot;user&quot;: &quot;Bob&quot;,
        &quot;action&quot;: &quot;joined&quot;
    }
}
</code></pre>

<p><a name="event.message"></a></p>
<h2 id="message-event"><em>message <sup>event</sup></em></h2>
<p>Notifies about new messages in a room.</p>
<h3 id="description_6">Description</h3>
<p>Register to this event to be notified about new messages in a room.</p>
<h3 id="parameters_5">Parameters</h3>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">params</td>
<td align="left">object</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">params.user</td>
<td align="left">string</td>
<td align="left">Name of the user that has sent the message</td>
</tr>
<tr>
<td align="left">params.message</td>
<td align="left">string</td>
<td align="left">Content of the message</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The <em>room ID</em> argument shall be passed within the designator, e.g. <em>1e217990dd1cd4f66124.client.events.1</em>.</p>
</blockquote>
<h3 id="example_5">Example</h3>
<pre><code class="json">{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;method&quot;: &quot;1e217990dd1cd4f66124.client.events.1.message&quot;,
    &quot;params&quot;: {
        &quot;user&quot;: &quot;Bob&quot;,
        &quot;message&quot;: &quot;Hello!&quot;
    }
}
</code></pre>

  <br>
    

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>